<!DOCTYPE html>
<html>
<head>
<link rel='shortcut icon' href='/image/pngegg (8).png' />
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="/icons/themify-icons/themify-icons.css" >
<link rel="stylesheet" href="/css/navbar.css">
</head>
<style>
.search{
  margin-right: 3px;
  margin-left: 2px;
  color: blue; font-size: 15px;top:4px;position: relative;float:right;
  right:3px;
  z-index: 99;
  background-color: white;
  }
.search:hover{
	font-size: 20px;
	top:2px;
	margin-right: 0px;
	margin-left: 0px;
	}
</style>
<body>
<div style="margin: 10%; ">
<h2 style="color: red;">Add a random question to page 1</h2>
<hr>
<br>
<p style="border-top:1px solid gray; border-left: 1px solid gray; width: 150px;height: 22px;padding: 3px;">Exiting category</p>
<div style="margin-left: 3%">
<p>Category 
<select  id="cate" onchange="addi()" onclick="showlist(this.value,1)" style="position: relative;margin-left:20%;width: 200px;height: 30px">
<option >Default</option>
<option  th:each="bank,number:${list}" th:utext="${bank}+ ' ('+${numberquestion.get(number.count-1)}+')'"  th:value="${bank}"></option>
</select> </p>
<p style="position: absolute; left:30%;">
<input type="checkbox" id="checkbox" onclick="showlist(document.getElementById('cate').value, 1)"> <label for="checkbox" >Include questions from subcategories too</label>
</p>
</div>
<br><br><br><br>

<p >Number of random questions 
<select id="numberrandom" onclick="addi()" style="position: absolute; margin-left:11%;" >
<option  th:each="number : ${#numbers.sequence(1, 20)}" th:utext="${number}" ></option>
</select>
 </p>
 <br>
 <p>Question matching this filter</p>

<div style="min-height: 300px;width:98%;" id="questionList" th:fragment="questionList">

	<div style="position: absolute;left:10%;">
		<button  th:if="${totalPages>0}" style="width: 30px;height: 30px;" onclick="showlist(document.getElementById('cate').value, 1)">1</button>
      <button th:if="${totalPages>1}" style="width: 30px;height: 30px;" onclick="showlist(document.getElementById('cate').value, 2)">2</button>
      <button th:if="${totalPages>2}" style="width: 30px;height: 30px;" onclick="showlist(document.getElementById('cate').value, 3)">3</button>
	<button th:if="${totalPages>3}" style="width: 30px;height: 30px;" onclick="showlist(document.getElementById('cate').value, 4)">4</button>
	<button th:if="${totalPages>4}" style="width: 30px;height: 30px;" onclick="showlist(document.getElementById('cate').value, 5)">5</button>
	<button th:if="${totalPages>5}" style="width: 30px;height: 30px;" onclick="showlist(document.getElementById('cate').value, 6)">6</button>
	<button th:if="${totalPages>6}" style="width: 30px;height: 30px;" onclick="showlist(document.getElementById('cate').value, 7)">7</button>
	<button th:if="${totalPages>7}" style="width: 30px;height: 30px;" onclick="showlist(document.getElementById('cate').value, 8)">8</button>
	<button th:if="${totalPages>8}" style="width: 30px;height: 30px;" onclick="showlist(document.getElementById('cate').value, 9)">9</button>
  	<button th:if="${totalPages>9}" style="width: 30px;height: 30px;" onclick="showlist(document.getElementById('cate').value, 10)">10</button>
  	<button th:if="${totalPages>9}" style="width: 30px;height: 30px;" onclick="showlist(document.getElementById('cate').value, 11)">11</button>
  	<button th:if="${totalPages>9}" style="width: 30px;height: 30px;" onclick="showlist(document.getElementById('cate').value, 12)">12</button>
  	<button th:if="${totalPages>9}" style="width: 30px;height: 30px;" onclick="showlist(document.getElementById('cate').value, 13)">13</button>
  	<button th:if="${totalPages>9}" style="width: 30px;height: 30px;" onclick="showlist(document.getElementById('cate').value, 14)">14</button>
  	<button th:if="${totalPages>9}" style="width: 30px;height: 30px;" onclick="showlist(document.getElementById('cate').value, 15)">15</button>
	</div>
     <br><br>
		<ol>
		<li  class="element" th:each="question:${questionList}" th:value="${question.getQuestionID()}" style="margin:1px;border: 1px solid gray; height: 25px;width: 100%; overflow: hidden;padding-left: 2px;display: flex;flex-direction: row;">
		
		
		<!--  span th:text="${questionIndex.count} " style="position: relative;top:3px; background-color: #ccc9c9;padding-left:5px;padding-right:5px"></span-->
		<i class="ti-menu-alt" style=" flex: 0;font-size: 15px;top:3px;position: relative;"></i>
		
		<a href="#"   style=" flex: auto;text-decoration: none;position: relative;top: 2px;  overflow: hidden;  width: 80%;display: -webkit-inline-box;text-overflow: clip;white-space: nowrap;">
		 	  <span th:text="${question.getQuestionID()} + ' : ' + ${question.getQuestionContent()} + '   '" >
		      </span>
		      <span th:each="choice : ${question.getListChoice()}" th:text="${choice}+' '" >,</span>
		</a>
		
		<i class="ti-zoom-in search" style=" flex: 0;"></i>
		</li>

		</ol>

 
  
  
</div>


</div>
<form th:action="@{/{quiz}/addquestion6_5(quiz=${quiz})}" method="post"> 
 <input id="number" name="number" type="hidden" value="">
 <input type="hidden" name="quiz" th:value="${quiz}">
 <input id="bankk" type="hidden" name="bankk" value="">
 <input id="checkk" type="hidden" name="checkk" >
 <input id="submit" disabled=true  type="submit" style="position:relative;bottom: 10px; left:7%; background-color: blue; color: white;height: 30px;" value="Add selected questions to the quiz">
 
</form>
<div style="display: none;" id="message" th:text="${message}">

<script type="text/javascript">
var mes = document.getElementById("message").textContent;
if(mes.length>0){
alert("iphjioh");
	
}

</script>
</div>
<div id="navbar">
  <ul>
    <li><a href="/home/home">Home</a></li>
    <li><a href="/page2_1">Bank</a></li>
    <li>Calendar</li>
    <li><a href="/">My Course</a></li>
    <li><a href="/page3_2">Create Question</a></li>
    <li><a href="/TurnEditing">Create Quiz</a></li>
  </ul>
</div>

<script src="/js/script.js"></script>
<script type="text/javascript">
	function showlist(option,page){
		var status= document.getElementById("cate").value
		
		document.getElementById("bankk").value= document.getElementById("cate").value.replaceAll(/&#8203;&nbsp;/g, "")
		     document.getElementById("checkk").value= document.getElementById("checkbox").checked?1:0
		document.getElementById("number").value = document.getElementById("numberrandom").value
		option=option.replaceAll(/&#8203;&nbsp;/g, "");
		document.getElementById("number").value = document.getElementById("numberrandom").value
		var xhttp= new XMLHttpRequest()
		//var checkbox= document.getElementById("checkbox").querySelector("input")
		var checkbox = document.getElementById("checkbox").checked?1:0
		
		
		//if(checkbox.checked){
			
		//}else{
			xhttp.onreadystatechange=function(){
				if(xhttp.readyState===4 && xhttp.status===200){
					document.getElementById("questionList").innerHTML=xhttp.responseText
				}else{
					console.log(xhttp.status)
				}
			}
			  var url = "/getquestion6_5?option=" + option+"&check="+checkbox;
		        if (page !== undefined) {
		            url += "&page=" + page;
		        }
		        
		        xhttp.open("GET", url, true);
		        xhttp.send()
		//}
		
	}
	
	
	
</script>
<script type="text/javascript">
	function addi(){
			document.getElementById("submit").disabled=false
		    document.getElementById("bankk").value= document.getElementById("cate").value.replaceAll(/&#8203;&nbsp;/g, "")
		   document.getElementById("checkk").value= document.getElementById("checkbox").checked?1:0
			document.getElementById("number").value = document.getElementById("numberrandom").value
			
	}
	
</script>
</body>
</html>